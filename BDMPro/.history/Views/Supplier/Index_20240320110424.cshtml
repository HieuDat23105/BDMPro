@model BDMPro.Models.SupplierListing
@using BDMPro.Models;
@using BDMPro.Resources
@using BDMPro.CustomHelper
@inject Util util;

@{
    ViewBag.Module = Resource.Supplier;
    ViewBag.Title = ViewBag.Module + " "+ Resource.Management;
    Layout = "~/Views/Shared/_LayoutAfterLogin.cshtml";
    ViewBag.TableIdPrefix = "supplier";
    CurrentUserPermission permission = User.Identity.IsAllowed(ProjectEnum.ModuleCode.SupplierManagement.ToString(),util);
    List<SelectListItem> pageSizeDropDownList = RoleListConfig.PageSizeDropDownList;
    string defaultPageSizeText = pageSizeDropDownList.Where(a => a.Selected == true).Select(a => a.Text).FirstOrDefault();
    string defaultPageSizeValue = pageSizeDropDownList.Where(a => a.Selected == true).Select(a => a.Value).FirstOrDefault();
}

<h1>Supplier Management</h1>

<div id="supplierList">
    <!-- Partial view _MainList.cshtml will be loaded here -->
</div>

@section Scripts {
    <script>
        // Function to load supplier list via AJAX
        function loadSupplierList() {
            $.ajax({
                url: '@Url.Action("GetPartialViewSupplier", "Supplier")',
                type: 'POST',
                contentType: 'application/json',
                success: function (data) {
                    $('#supplierList').html(data);
                },
                error: function (xhr, status, error) {
                    console.error(xhr.responseText);
                    $('#supplierList').html('<p>Error loading supplier list. Please try again later.</p>');
                }
            });
        }

        // Call the function to load supplier list on page load
        $(document).ready(function () {
            loadSupplierList();
        });
    </script>
}
